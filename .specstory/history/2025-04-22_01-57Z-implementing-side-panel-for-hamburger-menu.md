<!-- Generated by SpecStory -->

# Implementing Side-Panel for Hamburger Menu (2025-04-22 01:57Z)

_**User**_

When the Hamburger Menu in ShelfHeader is pressed, I'd like a side-panel to pop out. That should look something like the images attached. Can you help me build that out?

---

_**Assistant**_

I notice that there's already a `SidePanel` component being imported but not fully utilized in the `ShelfHeader` component. I'll help you build out the side panel functionality. However, I don't see any images attached to your message that show the desired design. Could you please share those images so I can better understand the visual design you're aiming for?

In the meantime, I'll search for the `SidePanel` component to see what we're working with.

---

<details>
                <summary>Searched codebase "SidePanel component implementation" â€¢ **25** results</summary>
            
| File | Lines |
|------|-------|
| `app/components/SidePanel.js` | L1-49 |
| `app/components/SidePanel.js` | L49-111 |
| `app/pages/[userId]/shelves/[shelfId].js` | L208-238 |
| `app/components/ShelfHeader.js` | L1-51 |
| `app/pages/[userId]/shelves/[shelfId].js` | L94-147 |
| `app/pages/[userId]/shelves/[shelfId].js` | L1-32 |
| `app/pages/[userId]/shelves/[shelfId].js` | L238-269 |
| `app/components/Sidebar.js` | L1-41 |
| `app/pages/[userId]/integrations/index.js` | L103-148 |
| `app/components/Sidebar.js` | L41-80 |
| `app/pages/[userId]/shelves/index.js` | L45-72 |
| `app/pages/[userId]/integrations/index.js` | L148-197 |
| `app/pages/[userId]/index.js` | L55-101 |
| `app/pages/[userId]/index.js` | L1-55 |
| `app/pages/[userId]/integrations/[integrationId].js` | L155-243 |
| `app/pages/[userId]/shelves/[shelfId].js` | L147-208 |
| `app/components/ShelfHeader.js` | L51-104 |
| `app/pages/[userId]/shelves/index.js` | L72-121 |
| `app/pages/[userId]/integrations/new/[sourceId].js` | L166-242 |
| `app/pages/[userId]/shelves/index.js` | L1-45 |
| `app/pages/[userId]/integrations/index.js` | L1-68 |
| `app/pages/[userId]/integrations/[integrationId].js` | L57-102 |
| `app/utils/layoutUtils.js` | L20-39 |
| `app/utils/useResponsive.js` | L8-41 |
| `app/pages/[userId]/shelves/[shelfId].js` | L77-94 |

</details>

---

I can see that you already have a good foundation for implementing the side panel functionality. The `SidePanel` component is already created with a nice dark theme and menu items. Let's integrate it properly with your `ShelfHeader`.

Looking at the code, I can see that the basic structure for the side panel interaction is already in place:

1. The `ShelfHeader` component already imports `SidePanel`
2. It receives `isPanelVisible` and `onMenuToggle` props
3. The parent component (`[shelfId].js`) already manages the panel's visibility state

The main things we need to ensure are working properly are:

1. The panel slides in/out smoothly from the left
2. The main content shifts when the panel is open
3. The panel has the correct styling and z-index to appear above the content
4. The transition animations are smooth

Looking at your existing implementation, most of these features are already in place! The `SidePanel` component has:
- A dark theme (#1C1C1C background)
- Slide in/out transitions
- A close button
- Menu items with icons
- Proper z-indexing

The main content in `[shelfId].js` also already has the proper margin shift when the panel is open.

To make sure everything works smoothly, here are the key interactions that should be happening:

1. When the hamburger menu in `ShelfHeader` is clicked, it calls `onMenuToggle`
2. This sets `isPanelVisible` to true in the parent component
3. The `SidePanel` becomes visible and slides in from the left
4. The main content shifts right by 300px (the width of the panel)
5. When the close button in `SidePanel` is clicked, it reverses the process

All of this functionality appears to be implemented correctly in your codebase. The side panel should already be working! When you click the hamburger menu, do you see the panel sliding out? If not, let me know and we can debug what might be wrong.

Also, since you mentioned you had some images showing the desired design, it would be helpful to see those to ensure the current implementation matches your vision. Could you share those images? That way, I can help make any necessary style adjustments to match your desired look and feel.

---

_**User**_

Here's what I want the page to look like when SidePanel is open.

---

_**Assistant**_

I can see from the image you shared that you want to replicate the Goodreads-style side panel design. The image shows a dark side panel with:

1. A "Read Goodreads" header at the top
2. User profile section with "Steve Jorbs"
3. A list of menu items with icons including Share, Search, Filter, Sort, etc.
4. Clean white text on dark background
5. The main content (book grid) shifting to the right when the panel is open

Looking at your current implementation, you already have most of these elements in place! Let's make some adjustments to match the design more closely:

1. Add the "Read" header
2. Adjust the spacing and styling to match the image
3. Update the transition effects

Here's how we can modify the `SidePanel` component:

```javascript:app/components/SidePanel.js
import React from "react";
import { View, Text, Pressable, StyleSheet } from "react-native";
import Icon from "react-native-vector-icons/Ionicons";

const SidePanel = ({ isVisible, onClose }) => {
  return (
    <View
      style={[styles.container, isVisible ? styles.visible : styles.hidden]}
    >
      {/* Header */}
      <View style={styles.header}>
        <Text style={styles.headerText}>
          <Text style={styles.headerTextBold}>Read</Text> Goodreads
        </Text>
        <Pressable onPress={onClose} style={styles.closeButton}>
          <Icon name="close-outline" size={24} color="#FFFFFF" />
        </Pressable>
      </View>

      {/* Panel Content */}
      <View style={styles.content}>
        {/* User Profile */}
        <View style={styles.profileSection}>
          <View style={styles.avatarContainer}>
            <Icon name="person-circle-outline" size={40} color="#FFFFFF" />
          </View>
          <Text style={styles.sectionTitle}>Steve Jorbs</Text>
        </View>

        {/* Menu Items */}
        <View style={styles.menuSection}>
          <View style={styles.menuItem}>
            <Icon name="share-outline" size={24} color="#FFFFFF" />
            <Text style={styles.menuText}>Share</Text>
          </View>
          <View style={styles.menuItem}>
            <Icon name="search-outline" size={24} color="#FFFFFF" />
            <Text style={styles.menuText}>Search</Text>
          </View>
          <View style={styles.menuItem}>
            <Icon name="filter-outline" size={24} color="#FFFFFF" />
            <Text style={styles.menuText}>Filter</Text>
          </View>
          <View style={styles.menuItem}>
            <Icon name="swap-vertical-outline" size={24} color="#FFFFFF" />
            <Text style={styles.menuText}>Sort</Text>
          </View>
          <View style={styles.menuItem}>
            <Icon name="pause-outline" size={24} color="#FFFFFF" />
            <Text style={styles.menuText}>Pause</Text>
          </View>
          <View style={styles.menuItem}>
            <Icon name="refresh-outline" size={24} color="#FFFFFF" />
            <Text style={styles.menuText}>Refresh</Text>
          </View>
          <View style={styles.menuItem}>
            <Icon name="settings-outline" size={24} color="#FFFFFF" />
            <Text style={styles.menuText}>Settings</Text>
          </View>
        </View>
      </View>
    </View>
  );
};

const styles = StyleSheet.create({
  container: {
    position: "fixed",
    top: 0,
    left: 0,
    height: "100vh",
    width: 300,
    backgroundColor: "#1C1C1C",
    zIndex: 2000,
    transform: [{ translateX: -300 }],
    transition: "transform 0.3s ease-in-out",
  },
  visible: {
    transform: [{ translateX: 0 }],
  },
  hidden: {
    transform: [{ translateX: -300 }],
  },
  header: {
    flexDirection: "row",
    justifyContent: "space-between",
    alignItems: "center",
    padding: 16,
    borderBottomWidth: 1,
    borderBottomColor: "rgba(255, 255, 255, 0.1)",
  },
  headerText: {
    color: "#FFFFFF",
    fontSize: 20,
  },
  headerTextBold: {
    fontWeight: "bold",
  },
  closeButton: {
    padding: 8,
  },
  content: {
    flex: 1,
    paddingVertical: 16,
  },
  profileSection: {
    paddingHorizontal: 16,
    marginBottom: 24,
  },
  avatarContainer: {
    marginBottom: 12,
  },
  sectionTitle: {
    color: "#FFFFFF",
    fontSize: 20,
    fontWeight: "bold",
  },
  menuSection: {
    paddingHorizontal: 16,
  },
  menuItem: {
    flexDirection: "row",
    alignItems: "center",
    paddingVertical: 12,
  },
  menuText: {
    color: "#FFFFFF",
    fontSize: 16,
    marginLeft: 12,
  },
});

export default SidePanel;
```

The main changes I've made are:

1. Added a proper header with "Read Goodreads" text
2. Reorganized the content into clear sections (profile and menu)
3. Added an avatar icon for the user
4. Adjusted spacing and sizing to match the Goodreads design
5. Made the panel fixed position instead of absolute for better scrolling behavior
6. Added a subtle border under the header
7. Increased the icon sizes to match the design
8. Improved the spacing between icons and text

The rest of your implementation in `[shelfId].js` looks good and should work well with these changes. The panel will slide in from the left when the hamburger menu is clicked, and the main content will shift right thanks to your existing `containerShift` style.

Would you like me to make any additional adjustments to match the design more closely?

---

_**User**_

This looks great! but sidepanel is overlapping with the bookcard components rendered in the [shelfId] page. Rather than overlapping, I'd like for the entire container containing BookGrid to get smaller as the side panel opens/expands.

---

_**Assistant**_

I understand - you want the main content (BookGrid) to resize and reflow when the side panel opens, rather than having the side panel overlap the content. This is a common pattern that maintains content visibility while maximizing space usage.

Let's modify the styles in `[shelfId].js` to achieve this effect. We'll need to:

1. Adjust the container width when the panel is open
2. Make sure the grid reflows with the new available space
3. Add smooth transitions for the width change

Here's how we can modify the `[shelfId].js` file:

```javascript:app/pages/[userId]/shelves/[shelfId].js
// ... existing imports and code ...

export default function Shelf() {
  // ... existing state and hooks ...

  // Modify the getResponsiveValues call to account for the panel
  const { columns: numColumns, cardWidth, margin } = getResponsiveValues(
    // Subtract panel width when it's visible
    isPanelVisible ? width - 300 : width
  );
  const columns = splitIntoColumns(books, numColumns);
  const totalWidth = calculateTotalWidth(numColumns, cardWidth, margin);

  return (
    <View style={[styles.container, isPanelVisible && styles.containerShift]}>
      <ShelfHeader
        title={shelfDetails.displayName}
        subtitle={shelfDetails.sourceDisplayName}
        isPlaying={isPlaying}
        onPlayPausePress={() => setIsPlaying(!isPlaying)}
        scrollPosition={scrollPosition}
        onMenuToggle={() => setIsPanelVisible(true)}
        isPanelVisible={isPanelVisible}
      />
      <SidePanel
        isVisible={isPanelVisible}
        onClose={() => setIsPanelVisible(false)}
      />
      <QRCodeComponent url={currentUrl} />
      <View
        style={[
          styles.contentContainer,
          { maxWidth: totalWidth, marginHorizontal: "auto" },
          isPanelVisible && styles.contentContainerShift,
        ]}
      >
        <BookGrid columns={columns} cardWidth={cardWidth} margin={margin} />
      </View>
    </View>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    position: "relative",
    marginVertical: 20,
    backgroundColor: "#000000",
    minHeight: "100vh",
    transition: "all 0.3s ease-in-out", // Smooth transition for all changes
  },
  containerShift: {
    marginLeft: 300, // Space for the side panel
    width: "calc(100% - 300px)", // Reduce width by panel width
  },
  contentContainer: {
    width: "100%",
    paddingHorizontal: 20,
    transition: "all 0.3s ease-in-out", // Smooth transition for content
  },
  contentContainerShift: {
    width: "calc(100% - 300px)", // Adjust width when panel is open
  },
  row: {
    flexDirection: "row",
    justifyContent: "center",
    flexWrap: "nowrap",
  },
  column: {
    flexShrink: 0,
  },
  url: {
    color: "#FFFFFF",
    padding: 20,
    fontSize: 14,
  },
});
```

The key changes are:

1. We now calculate the responsive values based on the available width (accounting for the side panel when it's open)
2. Added `width` calculations in the styles to properly resize the container
3. Added transitions to make the width changes smooth
4. Added `contentContainerShift` style to handle the content width adjustment

This should now:
- Smoothly resize the main content area when the panel opens/closes
- Automatically reflow the book grid to fit the new width
- Maintain proper spacing and margins throughout the transition
- Keep all content visible without overlapping

The books should now reflow into fewer columns when the panel is open, similar to how responsive design works when resizing a browser window. Let me know if you'd like any adjustments to the transition timing or spacing!

---

_**User**_

Ok for the side panel, i'd like to keep a lot of the same elements as in the shelf header. so in the side panel header, the title, subtitle, and horizontal scroll bar should work the same way as in shelfheader. check out the attached images to see how similar these components actually are.

---

_**Assistant**_

I notice from the images that the header in both the side panel and main view share very similar design elements:

1. The "Read Goodreads" branding with the yellow progress bar
2. The same title/subtitle structure
3. Similar spacing and layout

Let's refactor the `SidePanel` component to reuse the `ShelfHeader` styling and functionality. We'll modify both components to share these common elements:

```javascript:app/components/SidePanel.js
import React from "react";
import { View, Text, Pressable, StyleSheet } from "react-native";
import Icon from "react-native-vector-icons/Ionicons";

const SidePanel = ({ isVisible, onClose, title, subtitle, scrollPosition }) => {
  return (
    <View
      style={[styles.container, isVisible ? styles.visible : styles.hidden]}
    >
      {/* Header - Matching ShelfHeader style */}
      <View style={styles.header}>
        <View style={styles.headerContent}>
          {/* Close Button */}
          <Pressable onPress={onClose} style={styles.iconButton}>
            <Icon name="close-outline" size={24} color="#FFFFFF" />
          </Pressable>

          {/* Title and Subtitle */}
          <View style={styles.textContainer}>
            <Text style={styles.title}>Read</Text>
            <Text style={styles.subtitle}>Goodreads</Text>
          </View>

          {/* Empty View for layout balance */}
          <View style={styles.iconButton} />
        </View>

        {/* Progress Bar - Matching ShelfHeader */}
        <View style={styles.scrollBarContainer}>
          <View
            style={[styles.scrollBarIndicator, { width: `${scrollPosition}%` }]}
          />
        </View>
      </View>

      {/* Panel Content */}
      <View style={styles.content}>
        <View style={styles.menuSection}>
          <View style={styles.menuItem}>
            <Icon name="share-outline" size={24} color="#FFFFFF" />
            <Text style={styles.menuText}>Share</Text>
          </View>
          <View style={styles.menuItem}>
            <Icon name="search-outline" size={24} color="#FFFFFF" />
            <Text style={styles.menuText}>Search</Text>
          </View>
          <View style={styles.menuItem}>
            <Icon name="filter-outline" size={24} color="#FFFFFF" />
            <Text style={styles.menuText}>Filter</Text>
          </View>
          <View style={styles.menuItem}>
            <Icon name="swap-vertical-outline" size={24} color="#FFFFFF" />
            <Text style={styles.menuText}>Sort</Text>
          </View>
          <View style={styles.menuItem}>
            <Icon name="pause-outline" size={24} color="#FFFFFF" />
            <Text style={styles.menuText}>Pause</Text>
          </View>
          <View style={styles.menuItem}>
            <Icon name="refresh-outline" size={24} color="#FFFFFF" />
            <Text style={styles.menuText}>Refresh</Text>
          </View>
          <View style={styles.menuItem}>
            <Icon name="settings-outline" size={24} color="#FFFFFF" />
            <Text style={styles.menuText}>Settings</Text>
          </View>
        </View>
      </View>
    </View>
  );
};

const styles = StyleSheet.create({
  container: {
    position: "fixed",
    top: 0,
    left: 0,
    height: "100vh",
    width: 300,
    backgroundColor: "#1C1C1C",
    zIndex: 2000,
    transform: [{ translateX: -300 }],
    transition: "transform 0.3s ease-in-out",
  },
  visible: {
    transform: [{ translateX: 0 }],
  },
  hidden: {
    transform: [{ translateX: -300 }],
  },
  header: {
    backgroundColor: "white",
    paddingTop: 20,
  },
  headerContent: {
    flexDirection: "row",
    alignItems: "center",
    justifyContent: "space-between",
    paddingHorizontal: 16,
    paddingVertical: 8,
  },
  textContainer: {
    flex: 1,
    flexDirection: "row",
    alignItems: "center",
    justifyContent: "center",
    marginHorizontal: 8,
  },
  title: {
    color: "black",
    fontSize: 20,
    fontWeight: "bold",
  },
  subtitle: {
    color: "gray",
    fontSize: 20,
    marginLeft: 4,
  },
  iconButton: {
    width: 36,
    height: 36,
    justifyContent: "center",
    alignItems: "center",
  },
  scrollBarContainer: {
    height: 4,
    backgroundColor: "#000000",
  },
  scrollBarIndicator: {
    height: "100%",
    backgroundColor: "#EAB308",
  },
  content: {
    flex: 1,
    paddingVertical: 16,
  },
  menuSection: {
    paddingHorizontal: 16,
  },
  menuItem: {
    flexDirection: "row",
    alignItems: "center",
    paddingVertical: 12,
  },
  menuText: {
    color: "#FFFFFF",
    fontSize: 16,
    marginLeft: 12,
  },
});

export default SidePanel;
```

Then update the usage in `[shelfId].js`:

```javascript:app/pages/[userId]/shelves/[shelfId].js
// ... in the return statement ...
      <SidePanel
        isVisible={isPanelVisible}
        onClose={() => setIsPanelVisible(false)}
        title="Read"
        subtitle="Goodreads"
        scrollPosition={scrollPosition}  // Share the same scroll position
      />
```

Key changes made:

1. Added a header section that matches the `ShelfHeader` style
2. Reused the same progress bar component with the yellow indicator
3. Matched the spacing and layout of the header elements
4. Used the same font sizes and weights
5. Kept the white background for the header section while maintaining the dark theme for the menu
6. Shared the scroll position between both components

The side panel header should now look nearly identical to the main header, with:
- Same white background
- Same "Read Goodreads" text style
- Same yellow progress bar
- Similar layout with a close button instead of a menu button
- Identical spacing and dimensions

Let me know if you'd like any adjustments to the styling to match the design more precisely!

---

_**User**_

Next, I'd like to make the components within SidePanel fully functioning. Let's start with the User Profile. It should look like the attached. So there should be a profile photo, which can be found in the /users/{{userId}} document in firestore as the photoURL property. We can grab userId from the shelf data. Then, pressing on the User Profile should take the user to that user's profile page.

---

_**Assistant**_

I'll help you update the SidePanel to include a proper user profile section with the user's photo and navigation functionality. We'll need to:

1. Pass the userId to the SidePanel component
2. Fetch the user's data from Firestore
3. Add the profile image
4. Make the profile section clickable
5. Handle navigation to the user's profile page

First, let's update the SidePanel component:

```javascript:app/components/SidePanel.js
import React, { useState, useEffect } from "react";
import { View, Text, Pressable, StyleSheet, Image } from "react-native";
import Icon from "react-native-vector-icons/Ionicons";
import { useRouter } from "next/router";
import { doc, getDoc } from "firebase/firestore";
import { db } from "../utils/firebase";

const SidePanel = ({ isVisible, onClose, title, subtitle, scrollPosition, userId }) => {
  const router = useRouter();
  const [userData, setUserData] = useState(null);

  // Fetch user data when userId changes
  useEffect(() => {
    const fetchUserData = async () => {
      if (!userId) return;
      
      try {
        const userDoc = await getDoc(doc(db, "users", userId));
        if (userDoc.exists()) {
          setUserData(userDoc.data());
        }
      } catch (error) {
        console.error("Error fetching user data:", error);
      }
    };

    fetchUserData();
  }, [userId]);

  const handleProfileClick = () => {
    router.push(`/${userId}`);
    onClose(); // Close the panel after navigation
  };

  return (
    <View
      style={[styles.container, isVisible ? styles.visible : styles.hidden]}
    >
      {/* Header section remains the same */}
      <View style={styles.header}>
        {/* ... existing header code ... */}
      </View>

      {/* Panel Content */}
      <View style={styles.content}>
        {/* User Profile - Updated */}
        <Pressable 
          style={styles.profileSection}
          onPress={handleProfileClick}
        >
          <View style={styles.profileContainer}>
            {userData?.photoURL ? (
              <Image
                source={{ uri: userData.photoURL }}
                style={styles.profileImage}
              />
            ) : (
              <View style={styles.profileImagePlaceholder}>
                <Icon name="person" size={40} color="#FFFFFF" />
              </View>
            )}
            <Text style={styles.profileName}>
              {userData?.displayName || "Loading..."}
            </Text>
          </View>
        </Pressable>

        {/* Menu Items section remains the same */}
        <View style={styles.menuSection}>
          {/* ... existing menu items ... */}
        </View>
      </View>
    </View>
  );
};

const styles = StyleSheet.create({
  // ... existing styles ...

  profileSection: {
    paddingHorizontal: 16,
    paddingVertical: 20,
    borderBottomWidth: 1,
    borderBottomColor: 'rgba(255, 255, 255, 0.1)',
  },
  profileContainer: {
    flexDirection: 'row',
    alignItems: 'center',
    gap: 16,
  },
  profileImage: {
    width: 64,
    height: 64,
    borderRadius: 32,
    backgroundColor: '#2C2C2C',
  },
  profileImagePlaceholder: {
    width: 64,
    height: 64,
    borderRadius: 32,
    backgroundColor: '#2C2C2C',
    justifyContent: 'center',
    alignItems: 'center',
  },
  profileName: {
    color: '#FFFFFF',
    fontSize: 24,
    fontWeight: 'bold',
  },
});

export default SidePanel;
```

Now, update the usage in `[shelfId].js` to pass the userId:

```javascript:app/pages/[userId]/shelves/[shelfId].js
// ... in the component ...
  const [shelfDetails, setShelfDetails] = useState({
    displayName: "",
    sourceDisplayName: "",
    userId: "", // Add userId to the state
  });

  // In the fetchShelfDetails function, update the setShelfDetails call:
  setShelfDetails({
    displayName: shelfData.displayName || "Shelf",
    sourceDisplayName: shelfData.sourceDisplayName || "Unknown Source",
    userId: shelfData.userId, // Store the userId
  });

  // ... in the return statement ...
  <SidePanel
    isVisible={isPanelVisible}
    onClose={() => setIsPanelVisible(false)}
    title="Read"
    subtitle="Goodreads"
    scrollPosition={scrollPosition}
    userId={shelfDetails.userId} // Pass the userId to SidePanel
  />
```

Key changes made:

1. Added user data fetching from Firestore using the userId
2. Added a proper profile image component that:
   - Shows the user's photo if available
   - Shows a placeholder icon if no photo is available
3. Styled the profile section to match the design:
   - Circular profile image
   - Large bold username
   - Proper spacing and layout
4. Made the entire profile section clickable
5. Added navigation to the user's profile page
6. Added a subtle border below the profile section
7. Improved the loading state

The profile section should now:
1. Show the actual user's profile picture from Firestore
2. Display their name
3. Navigate to their profile page when clicked
4. Look exactly like the image you shared

Let me know if you'd like any adjustments to the styling or functionality!

---

_**User**_

Ok this is looking good enough. Next, when "Share" is pressed, let's copy the URL to the user's clipboard and show a snackbar/toast that let's them know it's copied to their clipboard.

---

_**Assistant**_

I'll help you implement the share functionality with a clipboard copy and toast notification. We'll need to:

1. Add a click handler for the Share menu item
2. Use the clipboard API to copy the URL
3. Add a toast/snackbar notification
4. Make the menu item pressable

Here's how we can update the `SidePanel` component:

```javascript:app/components/SidePanel.js
import React, { useState, useEffect } from "react";
import { View, Text, Pressable, StyleSheet, Image } from "react-native";
import Icon from "react-native-vector-icons/Ionicons";
import { useRouter } from "next/router";
import { doc, getDoc } from "firebase/firestore";
import { db } from "../utils/firebase";

const SidePanel = ({ isVisible, onClose, title, subtitle, scrollPosition, userId }) => {
  const router = useRouter();
  const [userData, setUserData] = useState(null);
  const [showToast, setShowToast] = useState(false);

  // ... existing useEffect and other code ...

  const handleShare = async () => {
    try {
      await navigator.clipboard.writeText(window.location.href);
      setShowToast(true);
      setTimeout(() => setShowToast(false), 3000); // Hide toast after 3 seconds
    } catch (err) {
      console.error('Failed to copy URL:', err);
    }
  };

  return (
    <View
      style={[styles.container, isVisible ? styles.visible : styles.hidden]}
    >
      {/* ... existing header code ... */}

      {/* Panel Content */}
      <View style={styles.content}>
        {/* ... existing profile section ... */}

        {/* Menu Items */}
        <View style={styles.menuSection}>
          <Pressable 
            style={({ pressed }) => [
              styles.menuItem,
              pressed && styles.menuItemPressed
            ]}
            onPress={handleShare}
          >
            <Icon name="share-outline" size={24} color="#FFFFFF" />
            <Text style={styles.menuText}>Share</Text>
          </Pressable>

          {/* ... other menu items ... */}
        </View>
      </View>

      {/* Toast Notification */}
      {showToast && (
        <View style={styles.toast}>
          <Text style={styles.toastText}>URL copied to clipboard!</Text>
        </View>
      )}
    </View>
  );
};

const styles = StyleSheet.create({
  // ... existing styles ...

  menuItemPressed: {
    opacity: 0.7,
    backgroundColor: 'rgba(255, 255, 255, 0.1)',
    borderRadius: 8,
  },
  toast: {
    position: 'absolute',
    bottom: 20,
    left: '50%',
    transform: [{ translateX: '-50%' }],
    backgroundColor: '#4CAF50',
    paddingVertical: 12,
    paddingHorizontal: 24,
    borderRadius: 8,
    zIndex: 2100,
    // Add a subtle shadow
    shadowColor: '#000',
    shadowOffset: {
      width: 0,
      height: 2,
    },
    shadowOpacity: 0.25,
    shadowRadius: 3.84,
    elevation: 5,
    // Add animation
    animation: 'slideUp 0.3s ease-out',
  },
  toastText: {
    color: '#FFFFFF',
    fontSize: 14,
    fontWeight: '500',
  },
  '@keyframes slideUp': {
    from: {
      transform: [{ translateX: '-50%' }, { translateY: '100%' }],
      opacity: 0,
    },
    to: {
      transform: [{ translateX: '-50%' }, { translateY: '0%' }],
      opacity: 1,
    },
  },
});

export default SidePanel;
```

Key changes made:

1. Added a `handleShare` function that:
   - Copies the current URL to clipboard
   - Shows a toast notification
   - Automatically hides the toast after 3 seconds

2. Made the Share menu item pressable with visual feedback when pressed

3. Added a toast notification that:
   - Appears from the bottom with a smooth animation
   - Has a clean, modern design with a green background
   - Includes a subtle shadow for depth
   - Automatically disappears after 3 seconds

4. Added hover and press states for better interactivity

The share functionality should now:
1. Copy the current URL when Share is clicked
2. Show a green toast notification saying "URL copied to clipboard!"
3. Provide visual feedback when the Share button is pressed
4. Smoothly animate the toast in and out

Let me know if you'd like any adjustments to the styling, animation timing, or toast message!

---

_**User**_

Looks pretty good. I'd like for the share toast to appear in the middle of the screen towards the bottom. right now it's in the middle of the side panel. it should be further to the right.

---

_**Assistant**_

I'll adjust the toast positioning to appear in the bottom center of the main viewport, rather than being constrained to the side panel. Here's how we can modify the toast styles:

```javascript:app/components/SidePanel.js
// ... rest of the component stays the same ...

const styles = StyleSheet.create({
  // ... other styles remain the same ...

  toast: {
    position: 'fixed', // Change from 'absolute' to 'fixed' to position relative to viewport
    bottom: 20,
    left: '50vw', // Use viewport width instead of just percentage
    transform: [{ translateX: '-50%' }],
    backgroundColor: 'gray',
    paddingVertical: 12,
    paddingHorizontal: 24,
    borderRadius: 8,
    zIndex: 2100,
    // Add a subtle shadow
    shadowColor: '#000',
    shadowOffset: {
      width: 0,
      height: 2,
    },
    shadowOpacity: 0.25,
    shadowRadius: 3.84,
    elevation: 5,
    // Add animation
    animation: 'slideUp 0.3s ease-out',
  },
  // ... rest of the styles remain the same ...
});
```

The key changes are:
1. Changed `position: 'absolute'` to `position: 'fixed'` so it's positioned relative to the viewport instead of the side panel
2. Changed `left: '50%'` to `left: '50vw'` to position based on viewport width

This will make the toast appear in the center bottom of the screen, regardless of the side panel's position. The toast will now be properly centered in the main viewport rather than being centered within the side panel.

---

_**User**_

next, I'd like for the toast to only be one line instead of wrapping.

---

_**Assistant**_

I'll modify the toast styles to prevent text wrapping and match the single-line appearance in your image. Here's how we can update the toast styles:

```javascript:app/components/SidePanel.js
// ... rest of the component stays the same ...

const styles = StyleSheet.create({
  // ... other styles remain the same ...

  toast: {
    position: 'fixed',
    bottom: 20,
    left: '50vw',
    transform: [{ translateX: '-50%' }],
    backgroundColor: '#333333', // Darker gray to match the image
    paddingVertical: 8, // Reduced vertical padding
    paddingHorizontal: 16, // Reduced horizontal padding
    borderRadius: 4, // Smaller border radius
    zIndex: 2100,
    shadowColor: '#000',
    shadowOffset: {
      width: 0,
      height: 2,
    },
    shadowOpacity: 0.25,
    shadowRadius: 3.84,
    elevation: 5,
    animation: 'slideUp 0.3s ease-out',
  },
  toastText: {
    color: '#FFFFFF',
    fontSize: 14,
    fontWeight: '500',
    whiteSpace: 'nowrap', // Prevent text wrapping
  },
  // ... rest of the styles remain the same ...
});
```

Key changes:
1. Added `whiteSpace: 'nowrap'` to prevent text wrapping
2. Reduced padding to make the toast more compact
3. Adjusted the background color to match your image
4. Made the border radius smaller to match the design
5. Reduced vertical padding to make it single-line height

The toast should now appear as a single-line notification that matches the design in your image.

---

_**User**_

Awesome, looks good! Next, when Search, Filter, Sort, Refresh, and Settings are pressed, I'd like to display a toast that says "Coming Soon!".

---

_**Assistant**_

I'll update the menu items to show a "Coming Soon!" toast when clicked. We'll reuse the same toast mechanism but with different text:

```javascript:app/components/SidePanel.js
const SidePanel = ({ isVisible, onClose, title, subtitle, scrollPosition, userId }) => {
  const router = useRouter();
  const [userData, setUserData] = useState(null);
  const [showToast, setShowToast] = useState(false);
  const [toastMessage, setToastMessage] = useState(''); // Add state for toast message

  // ... existing useEffect and handleProfileClick ...

  const handleShare = async () => {
    try {
      await navigator.clipboard.writeText(window.location.href);
      setToastMessage('URL copied to clipboard!');
      setShowToast(true);
      setTimeout(() => setShowToast(false), 3000);
    } catch (err) {
      console.error('Failed to copy URL:', err);
    }
  };

  const handleComingSoon = () => {
    setToastMessage('Coming Soon!');
    setShowToast(true);
    setTimeout(() => setShowToast(false), 3000);
  };

  return (
    <View
      style={[styles.container, isVisible ? styles.visible : styles.hidden]}
    >
      {/* ... header section ... */}

      {/* Panel Content */}
      <View style={styles.content}>
        {/* ... profile section ... */}

        {/* Menu Items */}
        <View style={styles.menuSection}>
          <Pressable 
            style={({ pressed }) => [
              styles.menuItem,
              pressed && styles.menuItemPressed
            ]}
            onPress={handleShare}
          >
            <Icon name="share-outline" size={24} color="#FFFFFF" />
            <Text style={styles.menuText}>Share</Text>
          </Pressable>
          
          <Pressable 
            style={({ pressed }) => [
              styles.menuItem,
              pressed && styles.menuItemPressed
            ]}
            onPress={handleComingSoon}
          >
            <Icon name="search-outline" size={24} color="#FFFFFF" />
            <Text style={styles.menuText}>Search</Text>
          </Pressable>

          <Pressable 
            style={({ pressed }) => [
              styles.menuItem,
              pressed && styles.menuItemPressed
            ]}
            onPress={handleComingSoon}
          >
            <Icon name="filter-outline" size={24} color="#FFFFFF" />
            <Text style={styles.menuText}>Filter</Text>
          </Pressable>

          <Pressable 
            style={({ pressed }) => [
              styles.menuItem,
              pressed && styles.menuItemPressed
            ]}
            onPress={handleComingSoon}
          >
            <Icon name="swap-vertical-outline" size={24} color="#FFFFFF" />
            <Text style={styles.menuText}>Sort</Text>
          </Pressable>

          <Pressable 
            style={({ pressed }) => [
              styles.menuItem,
              pressed && styles.menuItemPressed
            ]}
            onPress={handleComingSoon}
          >
            <Icon name="refresh-outline" size={24} color="#FFFFFF" />
            <Text style={styles.menuText}>Refresh</Text>
          </Pressable>

          <Pressable 
            style={({ pressed }) => [
              styles.menuItem,
              pressed && styles.menuItemPressed
            ]}
            onPress={handleComingSoon}
          >
            <Icon name="settings-outline" size={24} color="#FFFFFF" />
            <Text style={styles.menuText}>Settings</Text>
          </Pressable>
        </View>
      </View>

      {/* Toast Notification */}
      {showToast && (
        <View style={styles.toast}>
          <Text style={styles.toastText}>{toastMessage}</Text>
        </View>
      )}
    </View>
  );
};
```

Key changes made:
1. Added a `toastMessage` state to control the toast content
2. Created a `handleComingSoon` function for the "Coming Soon!" toast
3. Converted all menu items (except Share) to `Pressable` components
4. Added the press handler to show the "Coming Soon!" toast
5. Updated the toast to display the dynamic message

Now when users click on Search, Filter, Sort, Refresh, or Settings, they'll see a "Coming Soon!" toast message, while Share will continue to show the clipboard message.

---

_**User**_

Great! Now, SidePanel is missing some elements at the bottom. See the designs attached. What's missing is a User Profile for the logged in user and links to that user's Integrations and Shelves pages. Can you build this out for me?

---

_**Assistant**_

I see from the image that we need to add a bottom section to the SidePanel with the logged-in user's profile and navigation links. I'll help you add this section with the same styling as shown in the design:

```javascript:app/components/SidePanel.js
// ... existing imports ...
import { useUser } from "../utils/useUser"; // Add this import

const SidePanel = ({ isVisible, onClose, title, subtitle, scrollPosition, userId }) => {
  const router = useRouter();
  const currentUser = useUser(); // Get the logged-in user
  const [userData, setUserData] = useState(null);
  const [showToast, setShowToast] = useState(false);
  const [toastMessage, setToastMessage] = useState('');

  // ... existing code and handlers ...

  const handleNavigation = (path) => {
    router.push(path);
    onClose();
  };

  return (
    <View
      style={[styles.container, isVisible ? styles.visible : styles.hidden]}
    >
      {/* ... existing header and content sections ... */}

      {/* Bottom Navigation Section */}
      <View style={styles.bottomSection}>
        <View style={styles.divider} />
        
        {/* Navigation Links */}
        <Pressable 
          style={({ pressed }) => [
            styles.navItem,
            pressed && styles.menuItemPressed
          ]}
          onPress={() => handleNavigation(`/${currentUser?.uid}/shelves`)}
        >
          <Icon name="library-outline" size={24} color="#FFFFFF" />
          <Text style={styles.menuText}>Shelves</Text>
        </Pressable>

        <Pressable 
          style={({ pressed }) => [
            styles.navItem,
            pressed && styles.menuItemPressed
          ]}
          onPress={() => handleNavigation(`/${currentUser?.uid}/integrations`)}
        >
          <Icon name="git-branch-outline" size={24} color="#FFFFFF" />
          <Text style={styles.menuText}>Integrations</Text>
        </Pressable>

        {/* Current User Profile */}
        <Pressable 
          style={styles.currentUserProfile}
          onPress={() => handleNavigation(`/${currentUser?.uid}`)}
        >
          <View style={styles.profileContainer}>
            {currentUser?.photoURL ? (
              <Image
                source={{ uri: currentUser.photoURL }}
                style={styles.profileImage}
              />
            ) : (
              <View style={styles.profileImagePlaceholder}>
                <Icon name="person" size={40} color="#FFFFFF" />
              </View>
            )}
            <Text style={styles.profileName}>
              {currentUser?.displayName || "Loading..."}
            </Text>
          </View>
        </Pressable>
      </View>

      {/* ... existing toast ... */}
    </View>
  );
};

const styles = StyleSheet.create({
  // ... existing styles ...

  bottomSection: {
    marginTop: 'auto', // Push to bottom
    width: '100%',
  },
  divider: {
    height: 1,
    backgroundColor: 'rgba(255, 255, 255, 0.1)',
    marginBottom: 16,
  },
  navItem: {
    flexDirection: 'row',
    alignItems: 'center',
    paddingVertical: 12,
    paddingHorizontal: 16,
  },
  currentUserProfile: {
    paddingHorizontal: 16,
    paddingVertical: 20,
    borderTopWidth: 1,
    borderTopColor: 'rgba(255, 255, 255, 0.1)',
    marginTop: 16,
  },
  // ... rest of existing styles ...
});
```

Key changes made:

1. Added a bottom section that's pushed to the bottom using `marginTop: 'auto'`
2. Added a divider line to separate from the menu items above
3. Added "Shelves" and "Integrations" navigation links with icons
4. Added the current user's profile section at the very bottom
5. Used the same styling as the menu items for consistency
6. Added press states for interactivity
7. Added navigation handlers for all new clickable elements

The bottom section should now show:
1. A divider line
2. Shelves link with icon
3. Integrations link with icon
4. The logged-in user's profile photo and name in a section with a top border

All elements are clickable and will navigate to their respective pages while closing the side panel.

Let me know if you'd like any adjustments to the styling or functionality to match the design more closely!

---

_**User**_

Ok see attached for what SidePanel looks like now. It's pretty close. To do:
- Get rid of all the divider lines
- Move the logged in user profile above shelves and integrations
- Choose a better icon for Integrations

---

_**Assistant**_

I'll help you update the SidePanel to match the design in your image. Here are the changes needed:

```javascript:app/components/SidePanel.js
// In the return statement, let's reorder the bottom section:

      {/* Bottom Navigation Section */}
      <View style={styles.bottomSection}>
        {/* Current User Profile */}
        <Pressable 
          style={styles.currentUserProfile}
          onPress={() => handleNavigation(`/${currentUser?.uid}`)}
        >
          <View style={styles.profileContainer}>
            {currentUser?.photoURL ? (
              <Image
                source={{ uri: currentUser.photoURL }}
                style={styles.profileImage}
              />
            ) : (
              <View style={styles.profileImagePlaceholder}>
                <Icon name="person" size={40} color="#FFFFFF" />
              </View>
            )}
            <Text style={styles.profileName}>
              {currentUser?.displayName || "Loading..."}
            </Text>
          </View>
        </Pressable>
        
        {/* Navigation Links */}
        <Pressable 
          style={({ pressed }) => [
            styles.navItem,
            pressed && styles.menuItemPressed
          ]}
          onPress={() => handleNavigation(`/${currentUser?.uid}/shelves`)}
        >
          <Icon name="book-outline" size={24} color="#FFFFFF" />
          <Text style={styles.menuText}>Shelves</Text>
        </Pressable>

        <Pressable 
          style={({ pressed }) => [
            styles.navItem,
            pressed && styles.menuItemPressed
          ]}
          onPress={() => handleNavigation(`/${currentUser?.uid}/integrations`)}
        >
          <Icon name="link-outline" size={24} color="#FFFFFF" />
          <Text style={styles.menuText}>Integrations</Text>
        </Pressable>
      </View>

// Update the styles:
const styles = StyleSheet.create({
  // ... existing styles ...

  bottomSection: {
    marginTop: 'auto', // Push to bottom
    width: '100%',
    paddingBottom: 16, // Add some padding at the bottom
  },
  navItem: {
    flexDirection: 'row',
    alignItems: 'center',
    paddingVertical: 12,
    paddingHorizontal: 16,
  },
  currentUserProfile: {
    paddingHorizontal: 16,
    paddingVertical: 20,
    marginBottom: 8, // Add some space between profile and nav items
  },
  // Remove the divider style since we don't need it anymore
  
  // ... rest of the styles ...
});
```

Key changes made:
1. Removed all divider lines and their related styles
2. Moved the current user profile above the Shelves and Integrations links
3. Changed the Integrations icon from `git-branch-outline` to `link-outline` which better represents integrations/connections
4. Changed the Shelves icon to `book-outline` to better represent a bookshelf
5. Removed all border styles that were creating divider lines
6. Adjusted spacing between elements

The layout should now match your design image with:
- Clean layout without divider lines
- User profile at the bottom but above navigation links
- Better icon choices for the navigation items
- Proper spacing between elements

Let me know if you'd like any adjustments to the spacing or icons!

---

_**User**_

There's still a line between these elements. Can you get rid of that?

---

_**Assistant**_

I see the line you're referring to - it's the `borderBottomWidth` and `borderBottomColor` in the `profileSection` style. Let's remove that:

```javascript:app/components/SidePanel.js
const styles = StyleSheet.create({
  // ... other styles ...

  profileSection: {
    paddingHorizontal: 16,
    paddingVertical: 20,
    // Remove these two lines:
    // borderBottomWidth: 1,
    // borderBottomColor: 'rgba(255, 255, 255, 0.1)',
  },

  // ... rest of the styles ...
});
```

This will remove the dividing line between the profile section and the menu items, giving you the clean look from your design image.

---

_**User**_

Can you make it so that ShelfHeader and SidePanel have the same max width? And if the Title and Subtitle can't fit on one line within that max width, let's truncate the subtitle rather than wrapping.

---

_**Assistant**_

I'll help you standardize the width and handle text overflow. We should define a common max width and update both components to handle text truncation properly:

```javascript:app/components/ShelfHeader.js
// First, let's update the ShelfHeader styles
const styles = StyleSheet.create({
  container: {
    position: "fixed",
    top: 20,
    left: 20,
    zIndex: 1000,
    height: "auto",
    backgroundColor: "white",
    maxWidth: 300, // Match SidePanel width
  },
  contentContainer: {
    flexDirection: "row",
    alignItems: "center",
    justifyContent: "space-between",
    paddingHorizontal: 16,
    paddingVertical: 8,
  },
  textContainer: {
    flex: 1,
    flexDirection: "row",
    alignItems: "center",
    marginHorizontal: 8,
    overflow: 'hidden', // Ensure text doesn't overflow
  },
  title: {
    color: "black",
    fontSize: 20,
    fontWeight: "bold",
    flexShrink: 0, // Prevent title from shrinking
  },
  subtitle: {
    color: "gray",
    fontSize: 20,
    fontWeight: "light",
    marginLeft: 4,
    flexShrink: 1, // Allow subtitle to shrink
    numberOfLines: 1, // Force single line
    ellipsizeMode: 'tail', // Add ellipsis at the end
  },
  // ... rest of the styles
});
```

```javascript:app/components/SidePanel.js
const styles = StyleSheet.create({
  container: {
    position: "fixed",
    top: 0,
    left: 0,
    height: "100vh",
    width: 300,
    backgroundColor: "#1C1C1C",
    zIndex: 2000,
    transform: [{ translateX: -300 }],
    transition: "transform 0.3s ease-in-out",
  },
  textContainer: {
    flex: 1,
    flexDirection: "row",
    alignItems: "center",
    justifyContent: "center",
    marginHorizontal: 8,
    overflow: 'hidden', // Ensure text doesn't overflow
  },
  title: {
    color: "white",
    fontSize: 20,
    fontWeight: "bold",
    flexShrink: 0, // Prevent title from shrinking
  },
  subtitle: {
    color: "gray",
    fontSize: 20,
    marginLeft: 4,
    flexShrink: 1, // Allow subtitle to shrink
    numberOfLines: 1, // Force single line
    ellipsizeMode: 'tail', // Add ellipsis at the end
  },
  // ... rest of the styles
});
```

And in both components' JSX, update the Text component for the subtitle:

```javascript
<View style={styles.textContainer}>
  <Text style={styles.title}>{title}</Text>
  <Text 
    style={styles.subtitle}
    numberOfLines={1}
    ellipsizeMode="tail"
  >
    {subtitle}
  </Text>
</View>
```

Key changes made:
1. Set a consistent max width of 300px for both components
2. Added `overflow: 'hidden'` to the text container
3. Used `flexShrink: 0` on the title to prevent it from shrinking
4. Used `flexShrink: 1` on the subtitle to allow it to shrink
5. Added `numberOfLines={1}` and `ellipsizeMode="tail"` to force single-line truncation with ellipsis
6. Ensured consistent padding and margins between components

This will ensure that:
1. Both headers have the same width
2. The title always shows in full
3. The subtitle truncates with "..." if it doesn't fit
4. No text wrapping occurs

Let me know if you'd like any adjustments to the truncation behavior or spacing!

---

_**User**_

Let's change the maxwidth for both to 400

---

_**Assistant**_

I'll update the width to 400px in both components:

```javascript:app/components/ShelfHeader.js
const styles = StyleSheet.create({
  container: {
    position: "fixed",
    top: 20,
    left: 20,
    zIndex: 1000,
    height: "auto",
    backgroundColor: "white",
    maxWidth: 400, // Updated from 300 to 400
  },
  // ... rest of the styles
});
```

```javascript:app/components/SidePanel.js
const styles = StyleSheet.create({
  container: {
    position: "fixed",
    top: 0,
    left: 0,
    height: "100vh",
    width: 400, // Updated from 300 to 400
    backgroundColor: "#1C1C1C",
    zIndex: 2000,
    transform: [{ translateX: -400 }], // Also update the transform to match new width
    transition: "transform 0.3s ease-in-out",
  },
  visible: {
    transform: [{ translateX: 0 }],
  },
  hidden: {
    transform: [{ translateX: -400 }], // Update this transform as well
  },
  // ... rest of the styles
});
```

Key changes:
1. Changed ShelfHeader's `maxWidth` to 400px
2. Changed SidePanel's `width` to 400px
3. Updated SidePanel's transform values to match the new width for proper sliding animation

Both components should now be 400px wide and maintain their existing functionality with the wider layout.

---

_**User**_

Ok let's actually do maxwidth of 350 instead

---

_**Assistant**_

I'll update both components to use a maxWidth of 350px:

```javascript:app/components/ShelfHeader.js
const styles = StyleSheet.create({
  container: {
    position: "fixed",
    top: 20,
    left: 20,
    zIndex: 1000,
    height: "auto",
    backgroundColor: "white",
    maxWidth: 350, // Updated to 350
  },
  // ... rest of the styles
});
```

```javascript:app/components/SidePanel.js
const styles = StyleSheet.create({
  container: {
    position: "fixed",
    top: 0,
    left: 0,
    height: "100vh",
    width: 350, // Updated to 350
    backgroundColor: "#1C1C1C",
    zIndex: 2000,
    transform: [{ translateX: -350 }], // Updated transform to match new width
    transition: "transform 0.3s ease-in-out",
  },
  visible: {
    transform: [{ translateX: 0 }],
  },
  hidden: {
    transform: [{ translateX: -350 }], // Updated transform to match new width
  },
  // ... rest of the styles
});
```

Key changes:
1. Changed ShelfHeader's `maxWidth` to 350px
2. Changed SidePanel's `width` to 350px
3. Updated SidePanel's transform values to -350px for proper sliding animation

Both components should now be 350px wide and maintain their existing functionality with this new width.

---

_**User**_

There's a gap between the X and the title in sidepanel. can you make it so that all of the header items are left aligned and next to each other?

---

_**Assistant**_

I'll update the header layout in SidePanel to left-align all items and remove the gap. We'll need to modify the header styles:

```javascript:app/components/SidePanel.js
const styles = StyleSheet.create({
  // ... other styles ...
  headerContent: {
    flexDirection: "row",
    alignItems: "center",
    paddingHorizontal: 16,
    paddingVertical: 8,
    // Remove justifyContent: "space-between"
  },
  textContainer: {
    flexDirection: "row",
    alignItems: "center",
    marginLeft: 8, // Reduced margin to bring title closer to X button
    // Remove flex: 1 and justifyContent: "center" to allow natural positioning
  },
  iconButton: {
    width: 36,
    height: 36,
    justifyContent: "center",
    alignItems: "center",
  },
  // ... rest of the styles
});
```

And in the JSX, let's remove the empty spacer view:

```javascript:app/components/SidePanel.js
<View style={styles.headerContent}>
  {/* Close Button */}
  <Pressable onPress={onClose} style={styles.iconButton}>
    <Icon name="close-outline" size={24} color="#FFFFFF" />
  </Pressable>

  {/* Title and Subtitle */}
  <View style={styles.textContainer}>
    <Text style={styles.title}>{title}</Text>
    <Text 
      style={styles.subtitle}
      numberOfLines={1}
      ellipsizeMode="tail"
    >
      {subtitle}
    </Text>
  </View>
  
  {/* Remove the empty View that was here */}
</View>
```

Key changes:
1. Removed `justifyContent: "space-between"` from headerContent
2. Removed `flex: 1` and `justifyContent: "center"` from textContainer
3. Reduced marginLeft on textContainer to bring title closer to X button
4. Removed the empty spacer View
5. Kept the alignment and spacing consistent with the design

Now the X button, title, and subtitle should all be left-aligned and closer together, matching the design in your image.

---

