{"version":3,"file":"utils.js","sourceRoot":"","sources":["../../../sources/goodreads/utils.ts"],"names":[],"mappings":";;AAMA,0CAEC;AAKD,sCAEC;AAKD,sCAqBC;AAxCD,2CAAyC;AAEzC;;GAEG;AACH,SAAgB,eAAe,CAAC,UAA8B;IAC5D,OAAO,UAAU,CAAC,CAAC,CAAC,sBAAU,CAAC,UAAU,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;AAClE,CAAC;AAED;;GAEG;AACH,SAAgB,aAAa,CAAC,CAAS;IACrC,OAAO,CAAC,CAAC,OAAO,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC;AAClC,CAAC;AAED;;GAEG;AACH,SAAgB,aAAa,CAAC,CAAqB;IACjD,qCAAqC;IACrC,MAAM,SAAS,GAAG,CAAC,CAAC,qBAAqB,CAAC;SACvC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,EAAE,CAAC,IAAI,EAAE,CAAC;SACnC,GAAG,EAAE;SACL,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SAClC,GAAG,CAAC,MAAM,CAAC,CAAC;IAEf,IAAI,SAAS,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;QACzB,OAAO,IAAI,CAAC,GAAG,CAAC,GAAG,SAAS,CAAC,CAAC;IAChC,CAAC;IAED,wBAAwB;IACxB,MAAM,aAAa,GAAG,CAAC,CAAC,eAAe,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC;IACpD,IAAI,aAAa,EAAE,CAAC;QAClB,OAAO,CAAC,CAAC;IACX,CAAC;IAED,oBAAoB;IACpB,MAAM,UAAU,GAAG,CAAC,CAAC,SAAS,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC;IAC3C,OAAO,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAC5B,CAAC","sourcesContent":["import * as cheerio from 'cheerio';\nimport { RATING_MAP } from './constants';\n\n/**\n * Translates a textual rating into a numerical star rating.\n */\nexport function translateRating(ratingText: string | undefined): number | null {\n  return ratingText ? RATING_MAP[ratingText.toLowerCase()] : null;\n}\n\n/**\n * Removes newlines and extra spaces from a string\n */\nexport function cleanNewLines(s: string): string {\n  return s.replace(/\\n\\s+/g, ' ');\n}\n\n/**\n * Extracts the total number of pages from pagination\n */\nexport function getTotalPages($: cheerio.CheerioAPI): number {\n  // First check for numeric page links\n  const pageLinks = $('#reviewPagination a')\n    .map((_, el) => $(el).text().trim())\n    .get()\n    .filter(text => /^\\d+$/.test(text))\n    .map(Number);\n\n  if (pageLinks.length > 0) {\n    return Math.max(...pageLinks);\n  }\n\n  // Check for next button\n  const hasNextButton = $('a[rel=\"next\"]').length > 0;\n  if (hasNextButton) {\n    return 2;\n  }\n\n  // Check for content\n  const hasContent = $('.review').length > 0;\n  return hasContent ? 1 : 0;\n}\n"]}