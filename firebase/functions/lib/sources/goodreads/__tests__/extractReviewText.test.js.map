{"version":3,"file":"extractReviewText.test.js","sourceRoot":"","sources":["../../../../sources/goodreads/__tests__/extractReviewText.test.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,iDAAmC;AAEnC,kCAA4C;AAE5C,QAAQ,CAAC,mBAAmB,EAAE,GAAG,EAAE;IACjC,EAAE,CAAC,+CAA+C,EAAE,GAAG,EAAE;QACvD,MAAM,IAAI,GAAG;;;;;;;;;;;QAWT,CAAC;QACL,MAAM,CAAC,GAAG,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC7B,MAAM,IAAI,GAAG,CAAC,CAAC,eAAe,CAAC,CAAC,CAAC,CAAY,CAAC;QAC9C,MAAM,CAAC,IAAA,wBAAiB,EAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;IAC9D,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,yCAAyC,EAAE,GAAG,EAAE;QACjD,MAAM,IAAI,GAAG;;;;;;;;;;;QAWT,CAAC;QACL,MAAM,CAAC,GAAG,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC7B,MAAM,IAAI,GAAG,CAAC,CAAC,eAAe,CAAC,CAAC,CAAC,CAAY,CAAC;QAC9C,MAAM,CAAC,IAAA,wBAAiB,EAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;IAC5D,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,mCAAmC,EAAE,GAAG,EAAE;QAC3C,MAAM,IAAI,GAAG;;;;;;;;;;;;;QAaT,CAAC;QACL,MAAM,CAAC,GAAG,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC7B,MAAM,IAAI,GAAG,CAAC,CAAC,eAAe,CAAC,CAAC,CAAC,CAAY,CAAC;QAC9C,MAAM,CAAC,IAAA,wBAAiB,EAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC;IAChE,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,yCAAyC,EAAE,GAAG,EAAE;QACjD,MAAM,IAAI,GAAG;;;;;;;;;QAST,CAAC;QACL,MAAM,CAAC,GAAG,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC7B,MAAM,IAAI,GAAG,CAAC,CAAC,eAAe,CAAC,CAAC,CAAC,CAAY,CAAC;QAC9C,MAAM,CAAC,IAAA,wBAAiB,EAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;IAC9C,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,sCAAsC,EAAE,GAAG,EAAE;QAC9C,MAAM,IAAI,GAAG;;;;;;;;;;;;;QAaT,CAAC;QACL,MAAM,CAAC,GAAG,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC7B,MAAM,IAAI,GAAG,CAAC,CAAC,eAAe,CAAC,CAAC,CAAC,CAAY,CAAC;QAC9C,MAAM,CAAC,IAAA,wBAAiB,EAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC;IAChE,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","sourcesContent":["import * as cheerio from 'cheerio';\nimport type { Element } from 'domhandler';\nimport { extractReviewText } from '../data';\n\ndescribe('extractReviewText', () => {\n  it('extracts review text from freeTextreview span', () => {\n    const html = `\n<html>\n<body>\n  <table>\n    <tr>\n      <td class=\"field review\">\n        <span id=\"freeTextreview123\">This is a review</span>\n      </td>\n    </tr>\n  </table>\n</body>\n</html>`;\n    const $ = cheerio.load(html);\n    const elem = $('.field.review')[0] as Element;\n    expect(extractReviewText($, elem)).toBe('This is a review');\n  });\n\n  it('extracts review text from freeText span', () => {\n    const html = `\n<html>\n<body>\n  <table>\n    <tr>\n      <td class=\"field review\">\n        <span id=\"freeText456\">Another review</span>\n      </td>\n    </tr>\n  </table>\n</body>\n</html>`;\n    const $ = cheerio.load(html);\n    const elem = $('.field.review')[0] as Element;\n    expect(extractReviewText($, elem)).toBe('Another review');\n  });\n\n  it('trims whitespace from review text', () => {\n    const html = `\n<html>\n<body>\n  <table>\n    <tr>\n      <td class=\"field review\">\n        <span id=\"freeTextreview123\">\n          Review with spaces\n        </span>\n      </td>\n    </tr>\n  </table>\n</body>\n</html>`;\n    const $ = cheerio.load(html);\n    const elem = $('.field.review')[0] as Element;\n    expect(extractReviewText($, elem)).toBe('Review with spaces');\n  });\n\n  it('returns empty string for no review text', () => {\n    const html = `\n<html>\n<body>\n  <table>\n    <tr>\n      <td class=\"field review\"></td>\n    </tr>\n  </table>\n</body>\n</html>`;\n    const $ = cheerio.load(html);\n    const elem = $('.field.review')[0] as Element;\n    expect(extractReviewText($, elem)).toBe('');\n  });\n\n  it('handles nested review text correctly', () => {\n    const html = `\n<html>\n<body>\n  <table>\n    <tr>\n      <td class=\"field review\">\n        <div class=\"outer\">\n          <span id=\"freeTextreview789\">Nested review text</span>\n        </div>\n      </td>\n    </tr>\n  </table>\n</body>\n</html>`;\n    const $ = cheerio.load(html);\n    const elem = $('.field.review')[0] as Element;\n    expect(extractReviewText($, elem)).toBe('Nested review text');\n  });\n});\n"]}